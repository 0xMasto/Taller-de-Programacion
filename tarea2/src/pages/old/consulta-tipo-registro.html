<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Tipo de Registro - eventos.uy</title>
    <link rel="stylesheet" href="../css/simple-style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        .main-layout {
            display: flex;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            gap: 30px;
        }

        .sidebar {
            width: 250px;
            flex-shrink: 0;
        }

        .content-area {
            flex: 1;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            text-decoration: none;
            margin-bottom: 30px;
            display: block;
        }

        .auth-links {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .auth-links a {
            color: #333;
            text-decoration: underline;
            margin-left: 10px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background-color: #00cc99;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .search-container {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        .search-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .search-btn {
            padding: 10px 20px;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .search-btn:hover {
            background-color: #357abd;
        }

        .sidebar-section {
            background-color: #e8e8e8;
            padding: 15px;
            margin-bottom: 20px;
        }

        .sidebar-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 15px;
            text-align: center;
        }

        .category-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .category-list li {
            margin-bottom: 8px;
        }

        .category-list a {
            color: #333;
            text-decoration: underline;
            font-size: 14px;
        }

        .category-list a:hover {
            color: #4a90e2;
        }

        .users-section {
            background-color: #e8e8e8;
            padding: 15px;
            text-align: center;
        }

        .profile-section {
            background-color: #e8e8e8;
            padding: 15px;
            margin-bottom: 20px;
        }

        .profile-header {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 15px;
            text-align: center;
        }

        .profile-options a {
            display: block;
            color: #333;
            text-decoration: underline;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .page-content {
            background-color: white;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
        }

        .page-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: #333;
        }

        .back-link {
            display: inline-block;
            color: #4a90e2;
            text-decoration: underline;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .back-link:hover {
            color: #357abd;
        }

        .registration-types-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .registration-type-card {
            background-color: white;
            margin-bottom: 20px;
            padding: 25px;
            border: 2px solid #ddd;
            border-radius: 8px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .registration-type-card:hover {
            border-color: #4a90e2;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.1);
        }

        .type-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
        }

        .type-name {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .type-event {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .type-price {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 15px;
        }

        .type-price.free {
            color: #17a2b8;
        }

        .type-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .type-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .type-details p {
            margin: 5px 0;
            color: #666;
            font-size: 14px;
        }

        .features-section {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
        }

        .features-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 14px;
        }

        .feature-item:before {
            content: "✓";
            color: #28a745;
            font-weight: bold;
        }

        .filter-tabs {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        .filter-tab {
            padding: 8px 16px;
            border: 1px solid #ddd;
            background-color: white;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
        }

        .filter-tab.active {
            background-color: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }

        .filter-tab:hover:not(.active) {
            background-color: #f0f0f0;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .create-button {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .create-button:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>
    <div class="auth-links">
        <div id="guestAuth">
            <a href="login.html">Iniciar Sesión</a> / <a href="register.html">Registrarse</a>
        </div>
        <div id="userAuth" style="display: none;">
            <div class="user-info">
                <a href="#" onclick="logout()" style="color: #333; text-decoration: underline;">Cerrar sesión</a>
                <div class="user-avatar" id="userAvatar">M</div>
            </div>
        </div>
    </div>

    <div class="main-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <a href="../index.html" class="logo">Eventos.uy</a>
            
            <!-- Profile Section (only for logged in users) -->
            <div class="profile-section" id="profileSection" style="display: none;">
                <div class="profile-header">Mi Perfil</div>
                <div class="profile-options">
                    <a href="user-profile.html?nickname=" id="profileLink">Modificar Datos de Usuario</a>
                    <div id="organizerOptions" style="display: none;">
                        <a href="alta-evento.html">Alta Evento</a>
                        <a href="alta-edicion.html">Alta Edición</a>
                        <a href="alta-institucion.html">Alta Institución</a>
                        <a href="alta-patrocinio.html">Alta Patrocinio</a>
                        <a href="alta-tipo-registro.html">Alta Tipo de Registro</a>
                    </div>
                </div>
            </div>

            <!-- Categories -->
            <div class="sidebar-section">
                <div class="sidebar-title">Categorías</div>
                <ul class="category-list">
                    <li><a href="events.html?category=tecnologia">Tecnología</a></li>
                    <li><a href="events.html?category=innovacion">Innovación</a></li>
                    <li><a href="events.html?category=literatura">Literatura</a></li>
                    <li><a href="events.html?category=cultura">Cultura</a></li>
                    <li><a href="events.html?category=musica">Música</a></li>
                    <li><a href="events.html?category=deporte">Deporte</a></li>
                    <li><a href="events.html?category=salud">Salud</a></li>
                    <li><a href="events.html?category=entretenimiento">Entretenimiento</a></li>
                    <li><a href="events.html?category=agro">Agro</a></li>
                    <li><a href="events.html?category=negocios">Negocios</a></li>
                </ul>
            </div>

            <!-- Users -->
            <div class="users-section">
                <div class="sidebar-title">
                    <a href="users.html" style="color: #333; text-decoration: underline;">Usuarios</a>
                </div>
            </div>            
        </div>

        <!-- Main Content -->
        <div class="content-area">
            <!-- Search -->
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Buscar tipos de registro...">
                <button class="search-btn">Buscar</button>
            </div>

            <div class="page-content">
                <a href="../index.html" class="back-link">← Volver al inicio</a>
                <h2 class="page-title">Tipos de Registro</h2>
                <p style="color: #666; margin-bottom: 20px;">Explora los diferentes tipos de registro disponibles para eventos</p>

                <!-- Create button (only for organizers) -->
                <a href="alta-tipo-registro.html" class="create-button" id="createButton" style="display: none;">+ Crear Nuevo Tipo</a>

                <!-- Filter Tabs -->
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">Todos</button>
                    <button class="filter-tab" data-filter="free">Gratuitos</button>
                    <button class="filter-tab" data-filter="paid">De Pago</button>
                    <button class="filter-tab" data-filter="premium">Premium</button>
                </div>

                <!-- Registration Types List -->
                <ul class="registration-types-list">
                    <!-- Registration Type 1: Corredor 21K -->
                    <li class="registration-type-card">
                        <div class="registration-type-header">
                            <div class="registration-type-name">Corredor 21K</div>
                            <div class="registration-type-price">$500</div>
                        </div>
                        <div class="registration-type-info">
                            <p><strong>Evento:</strong> Maratón de Montevideo 2024</p>
                            <p><strong>Descripción:</strong> Inscripción a la media maratón</p>
                            <p><strong>Cupo Disponible:</strong> 500 registros</p>
                            <div class="registration-type-features">
                                <span class="feature-badge">Deporte</span>
                                <span class="feature-badge">Media Maratón</span>
                            </div>
                        </div>
                    </li>

                    <!-- Registration Type 2: Estudiante (TechConf) -->
                    <li class="registration-type-card">
                        <div class="registration-type-header">
                            <div class="registration-type-name">Estudiante</div>
                            <div class="registration-type-price">$1000</div>
                        </div>
                        <div class="registration-type-info">
                            <p><strong>Evento:</strong> Tecnología Punta del Este 2026</p>
                            <p><strong>Descripción:</strong> Acceso para estudiantes</p>
                            <p><strong>Cupo Disponible:</strong> 50 registros</p>
                            <div class="registration-type-features">
                                <span class="feature-badge">Estudiante</span>
                                <span class="feature-badge">Tecnología</span>
                            </div>
                        </div>
                    </li>

                    <!-- Registration Type 3: Full -->
                    <li class="registration-type-card">
                        <div class="registration-type-header">
                            <div class="registration-type-name">Full</div>
                            <div class="registration-type-price">$750</div>
                        </div>
                        <div class="registration-type-info">
                            <p><strong>Evento:</strong> Mobile World Congress 2025</p>
                            <p><strong>Descripción:</strong> Acceso ilimitado + Cena de gala</p>
                            <p><strong>Cupo Disponible:</strong> 550 registros</p>
                            <div class="registration-type-features">
                                <span class="feature-badge">Premium</span>
                                <span class="feature-badge">Cena de gala</span>
                                <span class="feature-badge">Acceso completo</span>
                            </div>
                        </div>
                    </li>

                    <!-- Registration Type 4: Estudiante (Web Summit) -->
                    <li class="registration-type-card">
                        <div class="registration-type-header">
                            <div class="registration-type-name">Estudiante</div>
                            <div class="registration-type-price">$300</div>
                        </div>
                        <div class="registration-type-info">
                            <p><strong>Evento:</strong> Web Summit 2026</p>
                            <p><strong>Descripción:</strong> Acceso para estudiantes</p>
                            <p><strong>Cupo Disponible:</strong> 1 registro</p>
                            <div class="registration-type-features">
                                <span class="feature-badge">Estudiante</span>
                                <span class="feature-badge">Web Summit</span>
                                <span class="feature-badge">Cupo limitado</span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

                name: "Participación Gratuita",
                event: "Startup Weekend",
                description: "Acceso gratuito al evento de emprendimiento con todas las actividades de networking y pitch sessions incluidas.",
                price: 0,
                currency: "USD",
                isFree: true,
                maxCapacity: 300,
                features: ["networking"],
                registrationStart: "2025-09-15T00:00",
                registrationEnd: "2025-11-15T23:59",
                type: "free"
            }
        ];

        // Check user authentication
        function checkUserAuth() {
            const user = localStorage.getItem('currentUser');
            if (user) {
                currentUser = JSON.parse(user);
                document.getElementById('guestAuth').style.display = 'none';
                document.getElementById('userAuth').style.display = 'flex';
                document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
                
                // Show profile section for logged in users
                document.getElementById('profileSection').style.display = 'block';
                
                // Update profile link
                const profileLink = document.getElementById('profileLink');
                profileLink.href = `user-profile.html?nickname=${currentUser.identifier.split('@')[0]}`;
                
                // Show organizer options and create button for organizadores
                if (currentUser.type === 'organizador') {
                    document.getElementById('organizerOptions').style.display = 'block';
                    document.getElementById('createButton').style.display = 'inline-block';
                }
            }
        }

        // Logout function
        function logout() {
            if (confirm('¿Estás seguro que deseas cerrar tu sesión?')) {
                localStorage.removeItem('currentUser');
                alert('Sesión cerrada correctamente');
                window.location.href = '../index.html';
            }
        }

        // Get feature names
        function getFeatureName(feature) {
            const featureNames = {
                'certificate': 'Certificado de participación',
                'materials': 'Material didáctico',
                'meals': 'Comidas incluidas',
                'networking': 'Sesiones de networking',
                'premium': 'Contenido premium exclusivo'
            };
            return featureNames[feature] || feature;
        }

        // Format price
        function formatPrice(regType) {
            if (regType.isFree) {
                return 'GRATUITO';
            }
            return `$${regType.price} ${regType.currency}`;
        }

        // Format dates
        function formatDate(dateString) {
            if (!dateString) return 'No especificada';
            const date = new Date(dateString);
            return date.toLocaleDateString('es-UY', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // Display registration types
        function displayRegistrationTypes() {
            const container = document.getElementById('registrationTypesList');
            const emptyState = document.getElementById('emptyState');
            
            if (filteredTypes.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';
            
            container.innerHTML = filteredTypes.map(regType => `
                <li class="registration-type-card">
                    <div class="type-name">${regType.name}</div>
                    <div class="type-event">Para evento: ${regType.event}</div>
                    <div class="type-price ${regType.isFree ? 'free' : ''}">${formatPrice(regType)}</div>
                    <div class="type-description">${regType.description}</div>
                    
                    <div class="type-details">
                        <div>
                            <p><strong>Capacidad máxima:</strong> ${regType.maxCapacity || 'Sin límite'}</p>
                            <p><strong>Registro inicia:</strong> ${formatDate(regType.registrationStart)}</p>
                            ${regType.earlyBirdDiscount ? `<p><strong>Descuento anticipado:</strong> ${regType.earlyBirdDiscount}%</p>` : ''}
                        </div>
                        <div>
                            <p><strong>Registro termina:</strong> ${formatDate(regType.registrationEnd)}</p>
                            <p><strong>Moneda:</strong> ${regType.currency}</p>
                        </div>
                    </div>
                    
                    ${regType.features && regType.features.length > 0 ? `
                        <div class="features-section">
                            <div class="features-title">Características incluidas:</div>
                            <div class="features-list">
                                ${regType.features.map(feature => `<div class="feature-item">${getFeatureName(feature)}</div>`).join('')}
                            </div>
                        </div>
                    ` : ''}
                </li>
            `).join('');
        }

        // Filter by type
        function filterByType(filter) {
            selectedFilter = filter;
            
            // Update tab buttons
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
            
            switch(filter) {
                case 'all':
                    filteredTypes = [...registrationTypesData];
                    break;
                case 'free':
                    filteredTypes = registrationTypesData.filter(type => type.isFree);
                    break;
                case 'paid':
                    filteredTypes = registrationTypesData.filter(type => !type.isFree);
                    break;
                case 'premium':
                    filteredTypes = registrationTypesData.filter(type => 
                        type.type === 'premium' || type.type === 'vip');
                    break;
            }
            
            displayRegistrationTypes();
        }

        // Search registration types
        function searchRegistrationTypes() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            let baseData = [];
            switch(selectedFilter) {
                case 'all':
                    baseData = [...registrationTypesData];
                    break;
                case 'free':
                    baseData = registrationTypesData.filter(type => type.isFree);
                    break;
                case 'paid':
                    baseData = registrationTypesData.filter(type => !type.isFree);
                    break;
                case 'premium':
                    baseData = registrationTypesData.filter(type => 
                        type.type === 'premium' || type.type === 'vip');
                    break;
            }
            
            if (searchTerm) {
                filteredTypes = baseData.filter(regType => 
                    regType.name.toLowerCase().includes(searchTerm) || 
                    regType.event.toLowerCase().includes(searchTerm) ||
                    regType.description.toLowerCase().includes(searchTerm)
                );
            } else {
                filteredTypes = baseData;
            }
            
            displayRegistrationTypes();
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            checkUserAuth();
            
            // Initialize with all registration types
            filteredTypes = [...registrationTypesData];
            displayRegistrationTypes();

            // Search on Enter key
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchRegistrationTypes();
                }
            });

            // Search on input
            document.getElementById('searchInput').addEventListener('input', searchRegistrationTypes);
        });
    </script>
</body>
</html>
