<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Usuario - eventos.uy</title>
    <link rel="stylesheet" href="../css/simple-style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        .main-layout {
            display: flex;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            gap: 30px;
        }

        .sidebar {
            width: 250px;
            flex-shrink: 0;
        }

        .content-area {
            flex: 1;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            text-decoration: none;
            margin-bottom: 30px;
            display: block;
        }

        .auth-links {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auth-links a {
            color: #333;
            text-decoration: underline;
            margin-left: 10px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-profile-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background-color: #00cc99;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
            position: relative;
        }

        .user-details {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .user-name {
            font-weight: bold;
            color: #333;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .user-actions {
            display: flex;
            align-items: center;
        }

        .user-actions a:hover {
            text-decoration: underline !important;
        }

        .search-container {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        .search-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .search-btn {
            padding: 10px 20px;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .search-btn:hover {
            background-color: #357abd;
        }

        .sidebar-section {
            background-color: #e8e8e8;
            padding: 15px;
            margin-bottom: 20px;
        }

        .sidebar-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 15px;
            text-align: center;
        }

        .category-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .category-list li {
            margin-bottom: 8px;
        }

        .category-list a {
            color: #333;
            text-decoration: underline;
            font-size: 14px;
            cursor: pointer;
        }

        .category-list a:hover {
            color: #4a90e2;
        }

        .profile-section {
            background-color: #e8e8e8;
            padding: 15px;
            margin-bottom: 20px;
        }

        .profile-header {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 15px;
            text-align: center;
        }

        .profile-options {
        }

        .profile-options a {
            display: block;
            color: #333;
            text-decoration: underline;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .users-section {
            background-color: #e8e8e8;
            padding: 15px;
            text-align: center;
        }

        .profile-main {
            background-color: white;
            border: 1px solid #ddd;
            padding: 20px;
        }

        .profile-avatar-section {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .profile-avatar-large {
            width: 100px;
            height: 100px;
            background-color: #00cc99;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 36px;
        }

        .profile-name {
            flex: 1;
        }

        .profile-name h2 {
            margin: 0 0 10px 0;
            font-size: 24px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .external-link {
            font-size: 16px;
            color: #666;
            text-decoration: none;
        }

        .profile-tabs {
            display: flex;
            gap: 2px;
            margin-bottom: 20px;
        }

        .profile-tab {
            padding: 10px 20px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            cursor: pointer;
            font-size: 14px;
            border-radius: 4px 4px 0 0;
        }

        .profile-tab.active {
            background-color: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .profile-tab {
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }

        .profile-tab:hover {
            background-color: #e9ecef;
        }

        .profile-tab.active:hover {
            background-color: white;
        }

        .profile-content {
            border: 1px solid #ddd;
            border-top: none;
            padding: 20px;
            background-color: white;
        }

        .profile-info {
            font-size: 14px;
            line-height: 1.6;
        }

        .profile-info p {
            margin-bottom: 10px;
        }

        .profile-info strong {
            font-weight: bold;
        }

        .link-icon {
            margin-left: 5px;
            font-size: 12px;
            color: #666;
        }

        .section-title {
            font-size: 16px;
            font-weight: bold;
            color: #2c5aa0;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e9ecef;
        }
    </style>
</head>
<body>
    <div class="auth-links">
        <div id="guestAuth">
            <a href="login.html">Iniciar Sesi贸n</a> / <a href="register.html">Registrarse</a>
        </div>
        <div id="userAuth" style="display: none;">
            <div class="user-info">
                <div class="user-profile-section">
                    <div class="user-avatar" id="userAvatar">
                        <img id="userImage" src="" alt="" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; display: none;">
                        <span id="userInitial">U</span>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">Usuario</span>
                        <div class="user-actions">
                            <a href="#" id="userProfileLink" style="color: #007bff; text-decoration: none; font-size: 12px;">Ver Perfil</a>
                            <span style="color: #ccc; margin: 0 5px;">|</span>
                            <a href="#" onclick="logout()" style="color: #dc3545; text-decoration: none; font-size: 12px;">Cerrar Sesi贸n</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <a href="../index.html" class="logo">Eventos.uy</a>
            
            <!-- Profile Section (only for logged in users) -->
            <div class="profile-section" id="profileSection" style="display: none;">
                <div class="profile-header">Mi Perfil</div>
                <div class="profile-options">
                    <a href="user-profile.html?nickname=" id="profileLink">Consulta de Usuario</a>
                    <a href="consulta-registro.html" id="assistantLink">Mis Registros</a>
                    <a href="alta-evento.html" id="organizerLink1" style="display: none;">Alta Evento</a>
                    <a href="alta-edicion.html" id="organizerLink2" style="display: none;">Alta Edici贸n</a>
                    <a href="alta-institucion.html" id="organizerLink3" style="display: none;">Alta Instituci贸n</a>
                </div>
            </div>

            <!-- Categories -->
            <div class="sidebar-section">
                <div class="sidebar-title">Categor铆as</div>
                <ul class="category-list">
                    <li><a href="events.html?category=tecnologia">Tecnolog铆a</a></li>
                    <li><a href="events.html?category=innovacion">Innovaci贸n</a></li>
                    <li><a href="events.html?category=deporte">Deporte</a></li>
                    <li><a href="events.html?category=salud">Salud</a></li>
                </ul>
            </div>

            <!-- Users -->
            <div class="users-section">
                <div class="sidebar-title">
                    <a href="users.html" style="color: #333; text-decoration: underline;">Usuarios</a>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content-area">
            <!-- Search -->
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Eventos, Ediciones">
                <button class="search-btn">Buscar</button>
            </div>

            <!-- Profile Content -->
            <div class="profile-main">
                <!-- Profile Avatar and Name (will be populated by JavaScript) -->
                <div class="profile-avatar-section">
                    <!-- Content will be dynamically loaded -->
                </div>

                <!-- Profile Tabs -->
                <div class="profile-tabs">
                    <div class="profile-tab active" data-tab="datos-usuario">Datos Usuario</div>
                    <div class="profile-tab" data-tab="ediciones">Ediciones</div>
                    <div class="profile-tab" data-tab="registros">Registros</div>
                </div>

                <!-- Profile Content -->
                <div class="profile-content">
                    <!-- Tab 1: Datos Usuario -->
                    <div class="tab-content active" id="datos-usuario">
                        <!-- Content will be dynamically loaded -->
                    </div>

                    <!-- Tab 2: Ediciones -->
                    <div class="tab-content" id="ediciones">
                        <!-- Content will be dynamically loaded -->
                    </div>

                    <!-- Tab 3: Registros -->
                    <div class="tab-content" id="registros">
                        <!-- Content will be dynamically loaded -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab functionality
        function initializeTabs() {
            const tabs = document.querySelectorAll('.profile-tab');
            const tabContents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');

                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));

                    // Add active class to clicked tab and corresponding content
                    this.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });
        }

        // Check login state and update UI
        function checkLoginState() {
            const currentUser = localStorage.getItem('currentUser');
            const guestAuth = document.getElementById('guestAuth');
            const userAuth = document.getElementById('userAuth');
            const profileSection = document.getElementById('profileSection');
            const profileLink = document.getElementById('profileLink');
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userImage = document.getElementById('userImage');
            const userInitial = document.getElementById('userInitial');
            const userProfileLink = document.getElementById('userProfileLink');
            
            if (currentUser) {
                const user = JSON.parse(currentUser);
                guestAuth.style.display = 'none';
                userAuth.style.display = 'block';
                profileSection.style.display = 'block';
                
                // Update user name in header
                userName.textContent = user.name;
                
                // Update profile links with user nickname
                profileLink.href = `user-profile.html?nickname=${user.nickname}`;
                userProfileLink.href = `user-profile.html?nickname=${user.nickname}`;
                
                // Update user avatar - try to show image, fallback to initial
                if (user.image) {
                    userImage.src = `../../imagens/${user.image}`;
                    userImage.alt = user.name;
                    userImage.style.display = 'block';
                    userInitial.style.display = 'none';
                    
                    // Handle image load error
                    userImage.onerror = function() {
                        userImage.style.display = 'none';
                        userInitial.style.display = 'flex';
                        userInitial.textContent = user.name.charAt(0).toUpperCase();
                    };
                } else {
                    userImage.style.display = 'none';
                    userInitial.style.display = 'flex';
                    userInitial.textContent = user.name.charAt(0).toUpperCase();
                }
                
                // Show/hide user-type-specific options
                const assistantLink = document.getElementById('assistantLink');
                const organizerLink1 = document.getElementById('organizerLink1');
                const organizerLink2 = document.getElementById('organizerLink2');
                const organizerLink3 = document.getElementById('organizerLink3');
                
                if (user.type === 'organizador') {
                    // Show organizer options, hide assistant options
                    if (assistantLink) assistantLink.style.display = 'none';
                    if (organizerLink1) organizerLink1.style.display = 'block';
                    if (organizerLink2) organizerLink2.style.display = 'block';
                    if (organizerLink3) organizerLink3.style.display = 'block';
                } else {
                    // Show assistant options, hide organizer options
                    if (assistantLink) assistantLink.style.display = 'block';
                    if (organizerLink1) organizerLink1.style.display = 'none';
                    if (organizerLink2) organizerLink2.style.display = 'none';
                    if (organizerLink3) organizerLink3.style.display = 'none';
                }
            } else {
                guestAuth.style.display = 'block';
                userAuth.style.display = 'none';
                profileSection.style.display = 'none';
            }
        }

        // Logout function
        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = '../index.html';
        }

        // Edit user data function
        function editUserData() {
            alert('Funcionalidad de Modificar Datos de Usuario - En desarrollo');
            // TODO: Implement edit user data functionality
        }

        // Change password function
        function changePassword() {
            alert('Funcionalidad de Cambiar Contrase帽a - En desarrollo');
            // TODO: Implement change password functionality
        }

        // Get user data from URL parameters or localStorage
        function getUserData() {
            const urlParams = new URLSearchParams(window.location.search);
            const nickname = urlParams.get('nickname');
            
            // Mock user database - In real app this would come from backend
            const users = {
                'atorres': {
                    nickname: 'atorres',
                    name: 'Ana Torres',
                    firstName: 'Ana',
                    lastName: 'Torres',
                    email: 'atorres@gmail.com',
                    type: 'asistente',
                    birthDate: '1990-05-12',
                    age: 35,
                    institution: 'Facultad de Ingenier铆a',
                    university: 'Universidad de la Rep煤blica',
                    image: 'IMG-US01.jpg',
                    registrations: [
                        {
                            id: 1,
                            eventName: 'Marat贸n de Montevideo 2024',
                            editionDate: '2024-10-15',
                            registrationType: 'Corredor 21K',
                            registrationDate: '2024-07-30',
                            cost: 500,
                            status: 'Confirmado'
                        },
                        {
                            id: 2,
                            eventName: 'Web Summit 2026',
                            editionDate: '2026-03-20',
                            registrationType: 'Estudiante',
                            registrationDate: '2025-08-21',
                            cost: 300,
                            status: 'Confirmado'
                        }
                    ]
                },
                'miseventos': {
                    nickname: 'miseventos',
                    name: 'MisEventos',
                    firstName: 'MisEventos',
                    lastName: '',
                    email: 'contacto@miseventos.com',
                    type: 'organizador',
                    description: 'Empresa de organizaci贸n de eventos.',
                    website: 'https://www.miseventos.com',
                    image: 'IMG-US04.jpeg',
                    editions: [
                        {
                            id: 1,
                            eventName: 'Web Summit 2026',
                            editionDate: '2026-03-20',
                            status: 'Aceptada',
                            location: 'World Trade Center',
                            registrations: 150
                        },
                        {
                            id: 2,
                            eventName: 'Tech Conference 2025',
                            editionDate: '2025-11-10',
                            status: 'Ingresada',
                            location: 'Antel Arena',
                            registrations: 0
                        },
                        {
                            id: 3,
                            eventName: 'Startup Pitch 2024',
                            editionDate: '2024-12-05',
                            status: 'Rechazada',
                            location: 'Sinergia Coworking',
                            registrations: 0,
                            rejectionReason: 'Documentaci贸n incompleta'
                        }
                    ]
                }
            };
            
            return users[nickname] || null;
        }

        // Check if current user is viewing their own profile
        function isOwnProfile(profileUser) {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser || !profileUser) return false;
            
            const user = JSON.parse(currentUser);
            return user.nickname === profileUser.nickname;
        }

        // Load and display user profile data
        function loadUserProfile() {
            const userData = getUserData();
            if (!userData) {
                document.querySelector('.profile-main').innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">Usuario no encontrado.</p>';
                return;
            }

            const isOwn = isOwnProfile(userData);

            // Update profile avatar and name
            const avatarSection = document.querySelector('.profile-avatar-section');
            const profileImage = userData.image ? `../../imagens/${userData.image}` : '';
            
            avatarSection.innerHTML = `
                <div class="profile-avatar-large">
                    ${profileImage ? 
                        `<img src="${profileImage}" alt="${userData.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">` :
                        `<span style="font-size: 36px;">${userData.name.charAt(0).toUpperCase()}</span>`
                    }
                </div>
                <div class="profile-name">
                    <h2>${userData.name} ${isOwn ? '(Mi Perfil)' : ''}</h2>
                    <p style="color: #666; margin: 5px 0;">@${userData.nickname}</p>
                    ${userData.website ? `<p style="margin: 5px 0;"><a href="${userData.website}" target="_blank" class="external-link">${userData.website} <span class="link-icon"></span></a></p>` : ''}
                </div>
            `;

            // Update user data tab
            updateUserDataTab(userData);

            // Update editions/registrations tabs based on user type
            if (userData.type === 'organizador') {
                updateOrganizerEditions(userData, isOwn);
                // Hide registrations tab for organizers
                document.querySelector('[data-tab="registros"]').style.display = 'none';
            } else {
                updateAssistantRegistrations(userData);
                // Hide editions tab for assistants
                document.querySelector('[data-tab="ediciones"]').style.display = 'none';
            }
        }

        // Update user data tab content
        function updateUserDataTab(userData) {
            const userDataContent = document.getElementById('datos-usuario');
            
            let basicInfo = `
                <div class="profile-section">
                    <div class="section-title">Informaci贸n B谩sica</div>
                    <div class="profile-info">
                        <p><strong>Nombre Completo:</strong> ${userData.name}</p>
                        <p><strong>Email:</strong> ${userData.email}</p>
                        <p><strong>Tipo de Usuario:</strong> ${userData.type === 'organizador' ? 'Organizador' : 'Asistente'}</p>
            `;

            if (userData.type === 'asistente') {
                basicInfo += `
                        <p><strong>Fecha de Nacimiento:</strong> ${new Date(userData.birthDate).toLocaleDateString('es-ES')}</p>
                        <p><strong>Edad:</strong> ${userData.age} a帽os</p>
                    </div>
                </div>
                
                <div class="profile-section">
                    <div class="section-title">Informaci贸n Acad茅mica</div>
                    <div class="profile-info">
                        <p><strong>Instituci贸n:</strong> ${userData.institution}</p>
                        <p><strong>Universidad:</strong> ${userData.university}</p>
                        <p><strong>Estado:</strong> Estudiante activo</p>
                    </div>
                </div>
                `;
            } else {
                basicInfo += `
                        <p><strong>Descripci贸n:</strong> ${userData.description}</p>
                        ${userData.website ? `<p><strong>Sitio Web:</strong> <a href="${userData.website}" target="_blank">${userData.website}</a></p>` : ''}
                    </div>
                </div>
                `;
            }

            const isOwn = isOwnProfile(userData);
            if (isOwn) {
                basicInfo += `
                <div class="profile-section">
                    <div class="section-title">Acciones</div>
                    <div class="profile-info">
                        <button class="btn btn-primary" onclick="editUserData()" style="padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; margin-right: 10px;">
                            Modificar Datos de Usuario
                        </button>
                        <button class="btn btn-secondary" onclick="changePassword()" style="padding: 10px 20px; background-color: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
                            Cambiar Contrase帽a
                        </button>
                    </div>
                </div>
                `;
            }

            userDataContent.innerHTML = basicInfo;
        }

        // Update organizer editions
        function updateOrganizerEditions(userData, isOwn) {
            const editionsContent = document.getElementById('ediciones');
            
            if (!userData.editions || userData.editions.length === 0) {
                editionsContent.innerHTML = `
                    <div class="profile-section">
                        <div class="section-title">Ediciones de Eventos Organizadas</div>
                        <div class="profile-info">
                            <p style="color: #666; text-align: center; padding: 40px;">
                                Este organizador no ha creado ninguna edici贸n de evento.
                            </p>
                        </div>
                    </div>
                `;
                return;
            }

            // Filter editions based on who's viewing
            let editionsToShow = userData.editions;
            if (!isOwn) {
                // Show only accepted editions for other users
                editionsToShow = userData.editions.filter(edition => edition.status === 'Aceptada');
            }

            if (editionsToShow.length === 0) {
                editionsContent.innerHTML = `
                    <div class="profile-section">
                        <div class="section-title">Ediciones de Eventos Organizadas</div>
                        <div class="profile-info">
                            <p style="color: #666; text-align: center; padding: 40px;">
                                ${isOwn ? 'No tienes ediciones aceptadas a煤n.' : 'Este organizador no tiene ediciones aceptadas.'}
                            </p>
                        </div>
                    </div>
                `;
                return;
            }

            let editionsHtml = `
                <div class="profile-section">
                    <div class="section-title">Ediciones de Eventos Organizadas</div>
                    <div class="profile-info">
            `;

            editionsToShow.forEach(edition => {
                const statusColor = {
                    'Aceptada': '#28a745',
                    'Ingresada': '#ffc107',
                    'Rechazada': '#dc3545'
                }[edition.status] || '#6c757d';

                editionsHtml += `
                    <div style="margin-bottom: 15px; padding: 15px; border: 1px solid #ddd; border-radius: 4px; background-color: #f8f9fa;">
                        <p><strong><a href="edition-detail.html?id=${edition.id}" style="color: #007bff; text-decoration: none;">${edition.eventName}</a></strong></p>
                        <p><strong>Fecha:</strong> ${new Date(edition.editionDate).toLocaleDateString('es-ES')}</p>
                        <p><strong>Ubicaci贸n:</strong> ${edition.location}</p>
                        <p><strong>Estado:</strong> <span style="color: ${statusColor}; font-weight: bold;">${edition.status}</span></p>
                        <p><strong>Registrados:</strong> ${edition.registrations}</p>
                        ${edition.rejectionReason ? `<p><strong>Motivo de rechazo:</strong> <span style="color: #dc3545;">${edition.rejectionReason}</span></p>` : ''}
                    </div>
                `;
            });

            editionsHtml += `
                    </div>
                </div>
            `;

            editionsContent.innerHTML = editionsHtml;
        }

        // Update assistant registrations
        function updateAssistantRegistrations(userData) {
            const registrationsContent = document.getElementById('registros');
            
            if (!userData.registrations || userData.registrations.length === 0) {
                registrationsContent.innerHTML = `
                    <div class="profile-section">
                        <div class="section-title">Registros en Eventos</div>
                        <div class="profile-info">
                            <p style="color: #666; text-align: center; padding: 40px;">
                                Este usuario no se ha registrado en ning煤n evento.
                            </p>
                        </div>
                    </div>
                `;
                return;
            }

            let registrationsHtml = `
                <div class="profile-section">
                    <div class="section-title">Registros en Eventos</div>
                    <div class="profile-info">
            `;

            userData.registrations.forEach(registration => {
                const statusColor = registration.status === 'Confirmado' ? '#28a745' : '#6c757d';
                
                registrationsHtml += `
                    <div style="margin-bottom: 15px; padding: 15px; border: 1px solid #ddd; border-radius: 4px; background-color: #f8f9fa;">
                        <p><strong><a href="consulta-registro.html?id=${registration.id}" style="color: #007bff; text-decoration: none;">${registration.eventName}</a></strong></p>
                        <p><strong>Fecha del evento:</strong> ${new Date(registration.editionDate).toLocaleDateString('es-ES')}</p>
                        <p><strong>Tipo:</strong> ${registration.registrationType}</p>
                        <p><strong>Fecha de registro:</strong> ${new Date(registration.registrationDate).toLocaleDateString('es-ES')}</p>
                        <p><strong>Costo:</strong> $${registration.cost}</p>
                        <p><strong>Estado:</strong> <span style="color: ${statusColor}; font-weight: bold;">${registration.status}</span></p>
                    </div>
                `;
            });

            // Add summary
            const totalCost = userData.registrations.reduce((sum, reg) => sum + reg.cost, 0);
            registrationsHtml += `
                <div style="margin-top: 20px; padding: 15px; background-color: #e9ecef; border-radius: 4px;">
                    <p><strong>Resumen:</strong></p>
                    <p>Total de registros: ${userData.registrations.length}</p>
                    <p>Total invertido: $${totalCost}</p>
                </div>
            `;

            registrationsHtml += `
                    </div>
                </div>
            `;

            registrationsContent.innerHTML = registrationsHtml;
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            checkLoginState();
            loadUserProfile();
        });
    </script>
            
</body>
</html>